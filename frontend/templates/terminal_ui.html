<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Control Hub: Terminal V1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #0d1117;
            color: #00ff41;
            font-family: 'Fira Code', monospace;
            margin: 0;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
            overflow: hidden;
        }
        #terminal-box {
            width: 100%;
            height: 90%;
            overflow-y: auto;
            border: 1px solid #30363d;
            padding: 10px;
            background: #010409;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.2);
            border-radius: 5px;
        }
        .line { margin-bottom: 5px; white-space: pre-wrap; word-wrap: break-word; }
        .prompt { color: #2f81f7; font-weight: bold; }
        .error { color: #ff6b6b; }
        .system { color: #f2cc60; }
        
        #input-area {
            display: flex;
            margin-top: 10px;
            align-items: center;
        }
        #cmd-input {
            background: transparent;
            border: none;
            color: #ffffff;
            font-family: 'Fira Code', monospace;
            font-size: 16px;
            flex-grow: 1;
            outline: none;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h3 style="margin-top: 0;">⚡ AI Control Hub: Terminal V1</h3>
    
    <div id="terminal-box">
        <div class="line system">System Initialized... Waiting for input.</div>
        <div class="line system">Type 'help' for available commands.</div>
    </div>

    <div id="input-area">
        <span class="prompt">admin@ai-core:~$</span>
        <input type="text" id="cmd-input" autofocus autocomplete="off">
    </div>

    <script>
        // Automatic connection (works on Local AND Render)
        const socket = io(); 

        const terminalBox = document.getElementById('terminal-box');
        const inputField = document.getElementById('cmd-input');

        // Server se Jawab aayega to yahan dikhega
        socket.on('terminal_output', function(data) {
            addOutput(data.output);
        });

        // Connection Status Check
        socket.on('connect', () => {
            addLine("✅ Connected to Neural Core.", "system");
        });
        
        socket.on('disconnect', () => {
            addLine("❌ Connection Lost. Reconnecting...", "error");
        });

        // Enter dabane par command bhejo
        inputField.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const command = inputField.value;
                if (command.trim() !== "") {
                    // Screen par dikhao ki humne kya type kiya
                    addLine(`admin@ai-core:~$ ${command}`, "prompt");
                    
                    // Server ko bhejo
                    socket.emit('command_input', command);
                    inputField.value = '';
                }
            }
        });

        function addLine(text, className) {
            const div = document.createElement('div');
            div.className = `line ${className || ''}`;
            div.textContent = text;
            terminalBox.appendChild(div);
            terminalBox.scrollTop = terminalBox.scrollHeight;
        }

        function addOutput(text) {
            // Newlines ko HTML break mein convert karo
            const div = document.createElement('div');
            div.className = "line";
            div.innerHTML = text.replace(/\n/g, "<br>");
            terminalBox.appendChild(div);
            terminalBox.scrollTop = terminalBox.scrollHeight;
        }
    </script>
</body>
    </html>
            
